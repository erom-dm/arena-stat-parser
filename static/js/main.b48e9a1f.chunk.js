(this["webpackJsonparena-data-parser"]=this["webpackJsonparena-data-parser"]||[]).push([[0],{211:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),o=a.n(c),l=(a(82),a(83),a(84),a(10)),i=a(3),s=a(9),u=a(77);var d=a(76),m="instanceData",f="myCharName";function p(e,t){localStorage.setItem(e,JSON.stringify(t))}var v="!disconnected",b=[572,562,559],h=["player1","player2","player3","player4","player5"];function j(e,t,a){var n=e.filter((function(e){return e.playerName===t})),r=[];if(n.forEach((function(e){var t={enteredTime:e.enteredTime,instanceID:e.instanceID,instanceName:e.instanceName,playerName:e.playerName,enemyTeamComp:[],myTeamComp:[],bracket:0,myTeam:{},enemyTeam:{},win:!1},a=function(e){var t,a,n,r=e.playerName;e.goldTeam.hasOwnProperty(r)?(t=e.goldTeam,a=e.purpleTeam,n=!!e.winningFaction):(t=e.purpleTeam,a=e.goldTeam,n=!e.winningFaction);var c=Object.keys(t),o=Object.keys(a),l=c.length,i=o.length,s=Math.max(l,i);!function(e,t,a){if(e.length<a)for(var n=0;n<a-e.length;n++)e.push(null);if(t.length<a)for(var r=0;r<a-t.length;r++)t.push(null)}(c,o,s);var u={},d=[],m={},f=[];return c.forEach((function(e,a){return O(e,a,t,u,d)})),o.forEach((function(e,t){return O(e,t,a,m,f)})),{bracket:s,win:n,myTeam:u,myTeamComp:d.sort(),enemyTeam:m,enemyTeamComp:f.sort()}}(e);Object.assign(t,a),r.push(t)})),a){var c=r.filter((function(e){var t,a;return!(0===(null===(t=e.myTeam.player1)||void 0===t?void 0:t.teamMMR)&&0===(null===(a=e.enemyTeam.player1)||void 0===a?void 0:a.teamMMR))}));r=c}return r}function O(e,t,a,n,r){var c=null===e;n[h[t]]=c?null:Object(l.a)({name:e},a[e]),r.push(c?v:a[e].class)}function g(e,t,a){e[t]?(e[t].matchCount+=1,a.win&&e[t].wins++):e[t]={matchCount:1,wins:Number(a.win)}}var y=a(5),S=function(e){var t=e.localStoreChangeHandler,a=e.localStorageChangeValue,r=Object(n.useState)("Upload file here"),c=Object(s.a)(r,2),o=c[0],u=c[1],f=Object(n.useCallback)((function(e){e.forEach((function(e){var n=new FileReader;n.onabort=function(){return u("File reading was aborted")},n.onerror=function(){return u("File reading failed")},n.onload=function(){var e,r,c=n.result;!function(e){var t=window.localStorage.getItem(m);if(t){var a=JSON.parse(t),n=[].concat(Object(i.a)(a),Object(i.a)(e)),r=Object(i.a)(new Map(n.map((function(e){return[e.enteredTime,e]}))).values());p(m,r)}else p(m,e)}((e=function(e){var t=e.lastIndexOf('["instances"] = ')+17,a=e.slice(t),n=new RegExp(/, -- \[\d+\]/,"g"),r=a.replaceAll("\n","").replaceAll("\r","").replaceAll("\t","").replaceAll('["','"').replaceAll('"]','"').replaceAll(" = ",":").replaceAll(",}","}").split(n),c=[];return r.forEach((function(e,t){try{c.push(JSON.parse(e))}catch(a){}})),c}((r=c,null===r||"string"===typeof r?'{"error":true}':(new TextDecoder).decode(new Uint8Array(r)))),e.filter((function(e){return b.includes(e.instanceID)&&e.hasOwnProperty("purpleTeam")&&e.hasOwnProperty("goldTeam")})))),t(!a),u("File successfully parsed")},n.readAsArrayBuffer(e)}))}),[t,a]),v=Object(d.a)({onDrop:f}),h=v.getRootProps,j=v.getInputProps;return Object(y.jsxs)("div",Object(l.a)(Object(l.a)({},h()),{},{className:"upload-area",children:[Object(y.jsx)("input",Object(l.a)({},j())),Object(y.jsx)("p",{children:o})]}))},w=a(75),x=a(213);function C(e,t,a){var n=a.colorStart,r=a.colorEnd;return a.useEndAsStart?r-e*t:n+e*t}function N(e,t){return(t/e*100).toFixed(1)}var T=function(e){var t,a,n=e.dataset,r=0,c=0,o=[],l=[],i=[],s=[],u={indexAxis:"y",responsive:!0,scales:{y:{ticks:{color:"#292F36",font:{size:15,family:"'Roboto', sans-serif"},stepSize:1,beginAtZero:!0}}},plugins:{tooltip:{callbacks:{afterLabel:function(e){var t=e.dataIndex,a=e.dataset.wins[t],n=e.dataset.data[t],r=N(n,a);return["Wins: ".concat(a,", Losses: ").concat(n-a),"WR: ".concat(r,"%")]}}},legend:{display:!1}}},d={labels:o,datasets:[{label:"",data:l,wins:i,backgroundColor:s,borderColor:[],borderWidth:1,hoverOffset:6}]},m=Object.getOwnPropertyNames(n),f=[];m.forEach((function(e){var t=n[e],a=t.matchCount,r=t.wins;f.push({teamComp:e,matchCount:a,wins:r})})),f.sort((function(e,t){return t.matchCount-e.matchCount})),f.forEach((function(e){var t=e.matchCount,a=e.wins,n=e.teamComp;r+=t,c+=a,o.push([n]),l.push(t),i.push(a)})),function(e,t,a,n){var r,c,o=a.colorStart,l=(a.colorEnd-o)/e;for(r=0;r<e;r++)c=C(r,l,a),n.push(t(c))}(f.length,x.a,{colorStart:.1,colorEnd:.85,useEndAsStart:!0},s),t=r-c,a=N(r,c);var p="Matches Played: ".concat(r,", Wins: ").concat(c,", Losses: ").concat(t,", WR: ").concat(a,"%,");return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:"header",children:Object(y.jsx)("h1",{className:"title",children:p})}),Object(y.jsx)(w.a,{data:d,options:u})]})},E=a(19),A=a.n(E),D=a(73),F=a.n(D);A.a.extend(F.a);var I=a(74),M=function(e){var t=e.sessionData,a=e.onChange,r=Object(n.useState)([]),c=Object(s.a)(r,2),o=c[0],l=c[1],u=Object(n.useRef)(o);u.current=o;var d=Object.getOwnPropertyNames(t),m={value:0,label:"All Data"},f=[];d.forEach((function(e,t){var a=Number(e),n=A.a.unix(a).format("HH:mm - DD/MM/YY"),r={value:a,label:"Session ".concat(t+1,", @ ").concat(n)};f.push(r)})),f.reverse();var p=function(){var e;return(null===u||void 0===u||null===(e=u.current)||void 0===e?void 0:e.length)===f.length};return Object(y.jsx)(I.a,{className:"session-select",classNamePrefix:"session-select",defaultValue:m,isOptionSelected:function(e){var t;return(null===u||void 0===u||null===(t=u.current)||void 0===t?void 0:t.some((function(t){return t.value===e.value})))||p()},options:[m].concat(f),value:p()?[m]:o,onChange:function(e,t){var n=[],r=t.action,c=t.option,o=t.removedValue;if("select-option"===r&&(null===c||void 0===c?void 0:c.value)===m.value)l(f),n.push.apply(n,Object(i.a)(f.map((function(e){return e.value}))));else if("deselect-option"===r&&(null===c||void 0===c?void 0:c.value)===m.value||"remove-value"===r&&(null===o||void 0===o?void 0:o.value)===m.value)l([]);else if("deselect-option"===t.action&&p()){var s=f.filter((function(e){return e.value!==(null===c||void 0===c?void 0:c.value)}));l(s),n.push.apply(n,Object(i.a)(s.map((function(e){return e.value}))))}else l(e||[]),n.push.apply(n,Object(i.a)(e.map((function(e){return e.value}))));a&&a(n)},hideSelectedOptions:!1,closeMenuOnSelect:!1,isMulti:!0})},P=function(){var e=Object(u.a)(),t=e.register,a=e.handleSubmit,r=Object(n.useState)(""),c=Object(s.a)(r,2),o=c[0],d=c[1],b=Object(n.useState)([]),h=Object(s.a)(b,2),O=h[0],w=h[1],x=Object(n.useState)({}),C=Object(s.a)(x,2),N=C[0],E=C[1],D=Object(n.useState)([0]),F=Object(s.a)(D,2),I=F[0],P=F[1],k=Object(n.useState)(!1),_=Object(s.a)(k,2),R=_[0],J=_[1],L=Object(n.useState)({}),W=Object(s.a)(L,2),B=W[0],H=W[1];Object(n.useEffect)((function(){!function(e,t){var a=window.localStorage.getItem(e);a&&t(JSON.parse(a))}(f,d)}),[]),Object(n.useEffect)((function(){var e=window.localStorage.getItem(m),t=window.localStorage.getItem(f),a=e&&t;if(a){var n=JSON.parse(e),r=JSON.parse(t);if(a&&E(function(e){var t={};e.sort((function(e,t){return e.enteredTime-t.enteredTime}));var a,n=null;return e.every((function(e){if(n){var r=A.a.unix(a.enteredTime);if(A.a.unix(e.enteredTime).isBetween(r,r.add(1,"hour")))return t[n].push(e),a=e,!0}return n=e.enteredTime,a=e,t[n]=[e],!0})),t}(n)),I.includes(0))w(j(n,r,!0));else{var c=[];I.forEach((function(e){c.push.apply(c,Object(i.a)(N[e]))})),w(j(c,r,!0))}}}),[R,I]),Object(n.useEffect)((function(){return H(function(e){var t={};return e.forEach((function(e){var a=e.enemyTeamComp.includes(v)||e.myTeamComp.includes(v),n=e.enemyTeamComp.reduce((function(e,t){return e.concat(" \\ ",t)}));g(t,a?"DC":n,e)})),t}(O))}),[O]);return Object(y.jsxs)("div",{className:"dashboard",children:[Object(y.jsxs)("div",{className:"dashboard__top-bar",children:[Object(y.jsx)(S,{localStoreChangeHandler:J,localStorageChangeValue:R}),Object(y.jsxs)("div",{className:"dashboard__filters",children:[Object(y.jsxs)("form",{onSubmit:a((function(e){p(f,e.charName),J(!R)})),children:[Object(y.jsx)("input",Object(l.a)(Object(l.a)({className:"dashboard__charname-input"},t("charName")),{},{placeholder:"".concat(o)})),Object(y.jsx)("button",{className:"dashboard__submit-charname",type:"submit",children:"Submit"})]}),N&&Object(y.jsx)(M,{onChange:P,sessionData:N})]})]}),O&&Object(y.jsx)("div",{className:"dashboard__chart-container",children:Object(y.jsx)(T,{dataset:B})})]})};var k=function(){return Object(y.jsx)("div",{className:"main-wrap",children:Object(y.jsx)(P,{})})},_=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,214)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),c(e),o(e)}))};o.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(k,{})}),document.getElementById("root")),_()},83:function(e,t,a){},84:function(e,t,a){}},[[211,1,2]]]);
//# sourceMappingURL=main.b48e9a1f.chunk.js.map