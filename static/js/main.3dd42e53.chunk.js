(this["webpackJsonparena-data-parser"]=this["webpackJsonparena-data-parser"]||[]).push([[0],{189:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(65),o=t.n(c),s=(t(76),t(77),t(78),t(10)),l=t(9),i=t(71);var u=t(70),d=t(4),m="instanceData",f="myCharName";function b(e,a){localStorage.setItem(e,JSON.stringify(a))}var p="!disconnected",h=[572,562,559],j=["player1","player2","player3","player4","player5"];function O(e,a,t){var n=e.filter((function(e){return e.playerName===a})),r=[];if(n.forEach((function(e){var a={enteredTime:e.enteredTime,instanceID:e.instanceID,instanceName:e.instanceName,playerName:e.playerName,enemyTeamComp:[],myTeamComp:[],bracket:0,myTeam:{},enemyTeam:{},win:!1},t=function(e){var a,t,n,r=e.playerName;e.goldTeam.hasOwnProperty(r)?(a=e.goldTeam,t=e.purpleTeam,n=!!e.winningFaction):(a=e.purpleTeam,t=e.goldTeam,n=!e.winningFaction);var c=Object.keys(a),o=Object.keys(t),s=c.length,l=o.length,i=Math.max(s,l);!function(e,a,t){if(e.length<t)for(var n=0;n<t-e.length;n++)e.push(null);if(a.length<t)for(var r=0;r<t-a.length;r++)a.push(null)}(c,o,i);var u={},d=[],m={},f=[];return c.forEach((function(e,t){return v(e,t,a,u,d)})),o.forEach((function(e,a){return v(e,a,t,m,f)})),{bracket:i,win:n,myTeam:u,myTeamComp:d.sort(),enemyTeam:m,enemyTeamComp:f.sort()}}(e);Object.assign(a,t),r.push(a)})),t){var c=r.filter((function(e){var a,t;return!(0===(null===(a=e.myTeam.player1)||void 0===a?void 0:a.teamMMR)&&0===(null===(t=e.enemyTeam.player1)||void 0===t?void 0:t.teamMMR))}));r=c}return r}function v(e,a,t,n,r){var c=null===e;n[j[a]]=c?null:Object(s.a)({name:e},t[e]),r.push(c?p:t[e].class)}function g(e,a,t){e[a]?(e[a].matchCount+=1,t.win&&e[a].wins++):e[a]={matchCount:1,wins:Number(t.win)}}var y=t(5),w=function(e){var a=e.localStoreChangeHandler,t=e.localStorageChangeValue,r=Object(n.useState)("Upload file here"),c=Object(l.a)(r,2),o=c[0],i=c[1],f=Object(n.useCallback)((function(e){e.forEach((function(e){var n=new FileReader;n.onabort=function(){return i("File reading was aborted")},n.onerror=function(){return i("File reading failed")},n.onload=function(){var e,r,c=n.result;!function(e){var a=window.localStorage.getItem(m);if(a){var t=JSON.parse(a),n=[].concat(Object(d.a)(t),Object(d.a)(e)),r=Object(d.a)(new Map(n.map((function(e){return[e.enteredTime,e]}))).values());b(m,r)}else b(m,e)}((e=function(e){var a=e.lastIndexOf('["instances"] = ')+17,t=e.slice(a),n=new RegExp(/, -- \[\d+\]/,"g"),r=t.replaceAll("\n","").replaceAll("\r","").replaceAll("\t","").replaceAll('["','"').replaceAll('"]','"').replaceAll(" = ",":").replaceAll(",}","}").split(n),c=[];return r.forEach((function(e,a){try{c.push(JSON.parse(e))}catch(t){}})),c}((r=c,null===r||"string"===typeof r?'{"error":true}':(new TextDecoder).decode(new Uint8Array(r)))),e.filter((function(e){return h.includes(e.instanceID)&&e.hasOwnProperty("purpleTeam")&&e.hasOwnProperty("goldTeam")})))),a(!t),i("File successfully parsed")},n.readAsArrayBuffer(e)}))}),[a,t]),p=Object(u.a)({onDrop:f}),j=p.getRootProps,O=p.getInputProps;return Object(y.jsxs)("div",Object(s.a)(Object(s.a)({},j()),{},{className:"upload-area",children:[Object(y.jsx)("input",Object(s.a)({},O())),Object(y.jsx)("p",{children:o})]}))},S=t(69),x=t(191);function C(e,a,t){var n=t.colorStart,r=t.colorEnd;return t.useEndAsStart?r-e*a:n+e*a}var N=function(e){var a=e.dataset,t=0,n=[],r=[],c=[],o=[],s={labels:n,datasets:[{label:"",data:r,wins:c,backgroundColor:o,borderColor:[],borderWidth:1,hoverOffset:6}]},l=Object.getOwnPropertyNames(a),i=[];l.forEach((function(e){var t=a[e],n=t.matchCount,r=t.wins;i.push({teamComp:e,matchCount:n,wins:r})})),i.sort((function(e,a){return a.matchCount-e.matchCount})),i.forEach((function(e){var a=e.matchCount,o=e.wins,s=e.teamComp;t+=a,n.push([s]),r.push(a),c.push(o)})),function(e,a,t,n){var r,c,o=t.colorStart,s=(t.colorEnd-o)/e;for(r=0;r<e;r++)c=C(r,s,t),n.push(a(c))}(i.length,x.a,{colorStart:.1,colorEnd:.85,useEndAsStart:!0},o);var u="Matches Played: ".concat(t);return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:"header",children:Object(y.jsx)("h1",{className:"title",children:u})}),Object(y.jsx)(S.a,{data:s,options:{indexAxis:"y",responsive:!0,scales:{y:{ticks:{color:"#292F36",font:{size:15,family:"'Roboto', sans-serif"},stepSize:1,beginAtZero:!0}}},plugins:{tooltip:{callbacks:{afterLabel:function(e){var a=e.dataIndex,t=e.dataset.wins[a],n=e.dataset.data[a],r=(t/n*100).toFixed(1);return["Wins: ".concat(t,", Losses: ").concat(n-t),"WR: ".concat(r,"%")]}}},legend:{display:!1}}}})]})},T=function(e){var a=Object(i.a)(),t=a.register,r=a.handleSubmit,c=Object(n.useState)(""),o=Object(l.a)(c,2),u=o[0],d=o[1],h=Object(n.useState)([]),j=Object(l.a)(h,2),v=j[0],S=j[1],x=Object(n.useState)(!1),C=Object(l.a)(x,2),T=C[0],E=C[1],A=Object(n.useState)({}),_=Object(l.a)(A,2),F=_[0],I=_[1];Object(n.useEffect)((function(){!function(e,a){var t=window.localStorage.getItem(e);t&&a(JSON.parse(t))}(f,d)}),[]),Object(n.useEffect)((function(){var e=window.localStorage.getItem(m),a=window.localStorage.getItem(f);e&&a&&S(O(JSON.parse(e),JSON.parse(a),!0))}),[T]),Object(n.useEffect)((function(){return I(function(e){var a={};return e.forEach((function(e){var t=e.enemyTeamComp.includes(p)||e.myTeamComp.includes(p),n=e.enemyTeamComp.reduce((function(e,a){return e.concat(" \\ ",a)}));g(a,t?"DC":n,e)})),a}(v))}),[v]);return Object(y.jsxs)("div",{className:"dashboard",children:[Object(y.jsxs)("div",{className:"dashboard__top-bar",children:[Object(y.jsx)(w,{localStoreChangeHandler:E,localStorageChangeValue:T}),Object(y.jsxs)("div",{className:"dashboard__filters",children:[Object(y.jsxs)("form",{onSubmit:r((function(e){b(f,e.charName),E(!T)})),children:[Object(y.jsx)("input",Object(s.a)(Object(s.a)({className:"dashboard__charname-input"},t("charName")),{},{placeholder:"".concat(u)})),Object(y.jsx)("button",{className:"dashboard__submit-charname",type:"submit",children:"Submit"})]}),Object(y.jsx)("div",{className:"dashboard__filters-btn",onClick:function(){},children:"All data"}),Object(y.jsx)("div",{className:"dashboard__filters-btn",children:"Last session"})]})]}),v&&Object(y.jsx)("div",{className:"dashboard__chart-container",children:Object(y.jsx)(N,{dataset:F})})]})};var E=function(){return Object(y.jsx)("div",{className:"main-wrap",children:Object(y.jsx)(T,{})})},A=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,192)).then((function(a){var t=a.getCLS,n=a.getFID,r=a.getFCP,c=a.getLCP,o=a.getTTFB;t(e),n(e),r(e),c(e),o(e)}))};o.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(E,{})}),document.getElementById("root")),A()},77:function(e,a,t){},78:function(e,a,t){}},[[189,1,2]]]);
//# sourceMappingURL=main.3dd42e53.chunk.js.map