(this["webpackJsonparena-data-parser"]=this["webpackJsonparena-data-parser"]||[]).push([[0],{205:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(17),o=t.n(c),l=(t(77),t(78),t(79),t(4)),s=t(6);var i=t(72),u=t(2),d="instanceData";function m(e,a){localStorage.setItem(e,JSON.stringify(a))}var f="!disconnected",p="~DC~",v=[572,562,559],b=["player1","player2","player3","player4","player5"];function h(e){var a=[];return e.forEach((function(e){var t,n,r={enteredTime:e.enteredTime,instanceID:e.instanceID,instanceName:e.instanceName,playerName:e.playerName,enemyTeamComp:[],myTeamComp:[],myTeamName:"",bracket:0,myTeam:{},enemyTeam:{},win:!1},c=function(e){var a,t,n,r,c=e.playerName;e.goldTeam.hasOwnProperty(c)?(a=e.goldTeam,r=e.goldTeam[c].teamName,t=e.purpleTeam,n=!!e.winningFaction):(a=e.purpleTeam,r=e.purpleTeam[c].teamName,t=e.goldTeam,n=!e.winningFaction);var o=Object.keys(a),l=Object.keys(t),s=o.length,i=l.length,u=Math.max(s,i);!function(e,a,t){if(e.length<t)for(var n=0;n<t-e.length;n++)e.push(p);if(a.length<t)for(var r=0;r<t-a.length;r++)a.push(p)}(o,l,u);var d={},m=[],f={},v=[];return o.forEach((function(e,t){return O(e,t,a,d,m)})),l.forEach((function(e,a){return O(e,a,t,f,v)})),{bracket:u,win:n,myTeamName:r,myTeam:d,myTeamComp:m.sort(),enemyTeam:f,enemyTeamComp:v.sort()}}(e);Object.assign(r,c),0===(null===(t=r.myTeam.player1)||void 0===t?void 0:t.teamMMR)&&0===(null===(n=r.enemyTeam.player1)||void 0===n?void 0:n.teamMMR)||a.push(r)})),a}function j(e,a){var t=[];return e.forEach((function(e){var n=e.filter((function(e){return e.myTeamName===a}));t.push.apply(t,Object(u.a)(n))})),t}function O(e,a,t,n,r){var c=e===p;n[b[a]]=c?null:Object(s.a)({name:e},t[e]),r.push(c?f:t[e].class)}function g(e,a,t){e[a]?(e[a].matchCount+=1,t.win&&e[a].wins++):e[a]={matchCount:1,wins:Number(t.win)}}var y=t(1),T=function(e){var a=e.localStoreChangeHandler,t=e.localStorageChangeValue,r=Object(n.useState)("Upload file here"),c=Object(l.a)(r,2),o=c[0],f=c[1],p=Object(n.useCallback)((function(e){e.forEach((function(e){var n=new FileReader;n.onabort=function(){return f("File reading was aborted")},n.onerror=function(){return f("File reading failed")},n.onload=function(){var e,r,c=n.result;!function(e){var a=window.localStorage.getItem(d);if(a){var t=JSON.parse(a),n=[].concat(Object(u.a)(t),Object(u.a)(e)),r=Object(u.a)(new Map(n.map((function(e){return[e.enteredTime,e]}))).values());m(d,r)}else m(d,e)}((e=function(e){var a=e.lastIndexOf('["instances"] = ')+17,t=e.slice(a),n=new RegExp(/, -- \[\d+\]/,"g"),r=t.replaceAll("\n","").replaceAll("\r","").replaceAll("\t","").replaceAll('["','"').replaceAll('"]','"').replaceAll(" = ",":").replaceAll(",}","}").split(n),c=[];return r.forEach((function(e,a){try{c.push(JSON.parse(e))}catch(t){}})),c}((r=c,null===r||"string"===typeof r?'{"error":true}':(new TextDecoder).decode(new Uint8Array(r)))),e.filter((function(e){return v.includes(e.instanceID)&&e.hasOwnProperty("purpleTeam")&&e.hasOwnProperty("goldTeam")})))),a(!t),f("File successfully parsed")},n.readAsArrayBuffer(e)}))}),[a,t]),b=Object(i.a)({onDrop:p}),h=b.getRootProps,j=b.getInputProps;return Object(y.jsxs)("div",Object(s.a)(Object(s.a)({},h()),{},{className:"upload-area",children:[Object(y.jsx)("input",Object(s.a)({},j())),Object(y.jsx)("p",{children:o})]}))},w=t(71),x=t(207);function C(e,a,t){var n=t.colorStart,r=t.colorEnd;return t.useEndAsStart?r-e*a:n+e*a}function S(e,a){return(a/e*100).toFixed(1)}var N=function(e){var a,t,n=e.dataset,r=0,c=0,o=[],l=[],s=[],i=[],u={indexAxis:"y",responsive:!0,scales:{y:{ticks:{color:"#292F36",font:{size:15,family:"'Roboto', sans-serif"},stepSize:1,beginAtZero:!0}}},plugins:{tooltip:{callbacks:{afterLabel:function(e){var a=e.dataIndex,t=e.dataset.wins[a],n=e.dataset.data[a],r=S(n,t);return["Wins: ".concat(t,", Losses: ").concat(n-t),"WR: ".concat(r,"%")]}}},legend:{display:!1}}},d={labels:o,datasets:[{label:"",data:l,wins:s,backgroundColor:i,borderColor:[],borderWidth:1,hoverOffset:6}]},m=Object.getOwnPropertyNames(n),f=[];m.forEach((function(e){var a=n[e],t=a.matchCount,r=a.wins;f.push({teamComp:e,matchCount:t,wins:r})})),f.sort((function(e,a){return a.matchCount-e.matchCount})),f.forEach((function(e){var a=e.matchCount,t=e.wins,n=e.teamComp;r+=a,c+=t,o.push([n]),l.push(a),s.push(t)})),function(e,a,t,n){var r,c,o=t.colorStart,l=(t.colorEnd-o)/e;for(r=0;r<e;r++)c=C(r,l,t),n.push(a(c))}(f.length,x.a,{colorStart:.1,colorEnd:.85,useEndAsStart:!0},i),a=r-c,t=S(r,c);var p="Matches Played: ".concat(r,", Wins: ").concat(c,", Losses: ").concat(a,", WR: ").concat(t,"%,");return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:"header",children:Object(y.jsx)("h1",{className:"title",children:p})}),Object(y.jsx)(w.a,{data:d,options:u})]})},E=t(15),A=t.n(E),M=t(70),D=t.n(M);A.a.extend(D.a);var F=t(28),k=function(e){var a=e.sessionData,t=e.onChange,r=Object(n.useState)([]),c=Object(l.a)(r,2),o=c[0],s=c[1],i=Object(n.useRef)(o);i.current=o;var d=Object(u.a)(a.keys()),m={value:0,label:"All Data"},f=[];d.forEach((function(e,a){var t=A.a.unix(e).format("HH:mm - DD/MM/YY"),n={value:e,label:"Session ".concat(a+1,", @ ").concat(t)};f.push(n)})),f.reverse();var p=function(){var e;return(null===i||void 0===i||null===(e=i.current)||void 0===e?void 0:e.length)===f.length};return Object(y.jsx)(F.a,{className:"session-select",classNamePrefix:"session-select",defaultValue:m,isOptionSelected:function(e){var a;return(null===i||void 0===i||null===(a=i.current)||void 0===a?void 0:a.some((function(a){return a.value===e.value})))||p()},options:[m].concat(f),value:p()?[m]:o,onChange:function(e,a){var n=[],r=a.action,c=a.option,o=a.removedValue;if("select-option"===r&&(null===c||void 0===c?void 0:c.value)===m.value)s(f),n.push.apply(n,Object(u.a)(f.map((function(e){return e.value}))));else if("deselect-option"===r&&(null===c||void 0===c?void 0:c.value)===m.value||"remove-value"===r&&(null===o||void 0===o?void 0:o.value)===m.value)s([]);else if("deselect-option"===a.action&&p()){var l=f.filter((function(e){return e.value!==(null===c||void 0===c?void 0:c.value)}));s(l),n.push.apply(n,Object(u.a)(l.map((function(e){return e.value}))))}else s(e||[]),n.push.apply(n,Object(u.a)(e.map((function(e){return e.value}))));t&&t(n)},hideSelectedOptions:!1,closeMenuOnSelect:!1,isMulti:!0})};var I=function(e){var a=e.teams,t=e.onChange,r=Object(n.useState)(),c=Object(l.a)(r,2),o=c[0],s=c[1],i=a.map((function(e){return{value:e,label:e}}));return Object(y.jsx)(F.a,{className:"team-select",classNamePrefix:"team-select",options:i,value:o,onChange:function(e){s(e),t&&e&&t(e.value)}})},P=function(){var e=Object(n.useState)([""]),a=Object(l.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)(""),o=Object(l.a)(c,2),s=o[0],i=o[1],m=Object(n.useState)(new Map),p=Object(l.a)(m,2),v=p[0],b=p[1],O=Object(n.useState)(),w=Object(l.a)(O,2),x=w[0],C=w[1],S=Object(n.useState)([0]),E=Object(l.a)(S,2),M=E[0],D=E[1],F=Object(n.useState)(!1),P=Object(l.a)(F,2),R=P[0],J=P[1],_=Object(n.useState)({}),L=Object(l.a)(_,2),W=L[0],B=L[1];return Object(n.useEffect)((function(){var e,a=window.localStorage.getItem(d);if(a){var t=h(JSON.parse(a));b(function(e){var a=new Map;e.sort((function(e,a){return e.enteredTime-a.enteredTime}));var t,n=null;return e.every((function(e){if(n){var r,c=A.a.unix(t.enteredTime);if(A.a.unix(e.enteredTime).isBetween(c,c.add(1,"hour")))return null===(r=a.get(n))||void 0===r||r.push(e),t=e,!0}return n=e.enteredTime,t=e,a.set(n,[e]),!0})),a}(t)),r((e=t,Object(u.a)(new Set(e.map((function(e){return e.myTeamName}))))))}}),[R]),Object(n.useEffect)((function(){if(null===v||void 0===v?void 0:v.size)if(M.includes(0))C(j(v,s));else{var e=new Map;M.forEach((function(a){var t=v.get(a);t&&e.set(a,t)})),C(j(e,s))}}),[v,M,s]),Object(n.useEffect)((function(){return x&&B(function(e){var a={};return e.forEach((function(e){var t=e.enemyTeamComp.includes(f)||e.myTeamComp.includes(f),n=e.enemyTeamComp.reduce((function(e,a){return e.concat(" \\ ",a)}));g(a,t?"DC":n,e)})),a}(x))}),[x]),Object(y.jsxs)("div",{className:"dashboard",children:[Object(y.jsxs)("div",{className:"dashboard__top-bar",children:[Object(y.jsx)(T,{localStoreChangeHandler:J,localStorageChangeValue:R}),Object(y.jsxs)("div",{className:"dashboard__filters",children:[t&&Object(y.jsx)(I,{onChange:i,teams:t}),v&&Object(y.jsx)(k,{onChange:D,sessionData:v})]})]}),x&&Object(y.jsx)("div",{className:"dashboard__chart-container",children:Object(y.jsx)(N,{dataset:W})})]})};var R=function(){return Object(y.jsx)("div",{className:"main-wrap",children:Object(y.jsx)(P,{})})},J=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,208)).then((function(a){var t=a.getCLS,n=a.getFID,r=a.getFCP,c=a.getLCP,o=a.getTTFB;t(e),n(e),r(e),c(e),o(e)}))};o.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(R,{})}),document.getElementById("root")),J()},78:function(e,a,t){},79:function(e,a,t){}},[[205,1,2]]]);
//# sourceMappingURL=main.91208a5e.chunk.js.map